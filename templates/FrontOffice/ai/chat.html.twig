<!DOCTYPE html>
<html>
	<head>
		<title>Medical AI</title>

		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
	</head>
	<body class="bg-light">

		<div class="container py-5">

			<h2 class="mb-4">ðŸ¤– Assistant mÃ©dical</h2>

			<div id="chatBox" class="border rounded p-3 mb-3 bg-white" style="height:400px;overflow:auto;"></div>

			<div class="input-group">
				<input id="msg" class="form-control" placeholder="Pose ta question mÃ©dicale...">
				<button onclick="sendMsg()" class="btn btn-primary">Envoyer</button>
			</div>

		</div>


		 <script>
		function addMsg(text,type){
		let div=document.createElement("div");
		div.className="mb-2 "+(type==="user"?"text-end":"text-start");
		div.innerHTML="<span class='badge bg-"+(type==="user"?"primary":"success")+"'>"+text+"</span>";
		document.getElementById("chatBox").appendChild(div);
		}
		
		function sendMsg(){
		
		let msg=document.getElementById("msg").value;
		if(!msg) return;
		
		addMsg(msg,"user");
		document.getElementById("msg").value="";
		
		fetch("/patient/ai-chat/send",{
		method:"POST",
		headers:{ "Content-Type":"application/json"},
		body:JSON.stringify({message:msg})
		})
		.then(r=>r.json())
		.then(data=>{
		addMsg(data.reply,"ai");
		});
		}
		</script>

	</body>
</html>
