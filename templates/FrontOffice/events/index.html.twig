{% block stylesheets %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <link rel="stylesheet" href="{{ asset('css/patient.css') }}?v=2">
    <link rel="stylesheet" href="{{ asset('css/eventFront.css') }}?v=1">
{% endblock %}

{% block body %}
<div class="patient-app">

    <!-- TOPBAR (exact style patient.css) -->
    {% include 'FrontOffice/patient/_header.html.twig' %}

    <!-- MAIN -->
    <main class="patient-main events-main">

        <!-- HERO (m√™me vibe que welcome-card) -->
        <section class="welcome-card events-hero">
            <div class="welcome-content">
                <h1>
                    √âv√©nements disponibles <span class="wave">üéâ</span>
                </h1>
                <p>
                    D√©couvrez les √©v√©nements publi√©s et choisissez celui qui vous int√©resse.
                </p>
            </div>
        </section>

        {% if events is empty %}
            <section class="card events-empty-card">
                <h2>Aucun √©v√©nement</h2>
                <p>Aucun √©v√©nement disponible pour le moment üôÇ</p>
            </section>
        {% else %}
            <!-- GRID -->
            <section class="events-grid">
                {% for e in events %}
                    {% set typeColor = e.type and e.type.couleur ? e.type.couleur : '#2d6cdf' %}

                    <article class="event-card">
                        <div class="event-card-head">
                            <div class="event-icon" style="border-color: {{ typeColor }};">
                                <i class="bi bi-calendar-event" style="color: {{ typeColor }};"></i>
                            </div>

                            {% if e.type %}
                                <span class="event-pill" style="--c: {{ typeColor }};">
                                    <i class="bi bi-tag"></i>
                                    {{ e.type.libelle }}
                                </span>
                            {% endif %}
                        </div>

                        <h3 class="event-title">{{ e.titre }}</h3>

                        <p class="event-desc">
                            {{ e.description|default('')|length > 0 ? e.description|slice(0,120) ~ '‚Ä¶' : 'Aucune description.' }}
                        </p>

                   <div class="event-meta">

  {# TYPE (optionnel) #}
  <div class="event-meta-row">
    <i class="bi bi-tag"></i>
    <span class="meta-label">Type :</span>
    <span class="meta-value">{{ e.type ? e.type.libelle : 'Non d√©fini' }}</span>
  </div>

  {# DATE #}
  <div class="event-meta-row">
    <i class="bi bi-clock"></i>
    <span class="meta-label">Date :</span>
    <span class="meta-value">
      {{ e.dateDebut ? e.dateDebut|date('d/m/Y H:i') : 'Non d√©finie' }}
    </span>
  </div>

  {# LIEU #}
  <div class="event-meta-row">
    <i class="bi bi-geo-alt"></i>
    <span class="meta-label">Lieu :</span>
    <span class="meta-value">{{ e.lieu ? e.lieu : 'Non d√©fini' }}</span>
  </div>

  {# CAPACIT√â #}
  <div class="event-meta-row">
    <i class="bi bi-people"></i>
    <span class="meta-label">Capacit√© :</span>
    <span class="meta-value">{{ e.capaciteMax ? e.capaciteMax : '‚Äî' }}</span>
  </div>

</div>


                        {% if e.image %}
                            <div class="event-image">
                                <img src="{{ asset('uploads/events/' ~ e.image) }}" alt="Image event" loading="lazy">
                            </div>
                        {% endif %}

                        <a class="event-btn" href="{{ path('front_events_show', {id: e.id}) }}">
                            Voir d√©tails <i class="bi bi-arrow-right"></i>
                        </a>
                    </article>
                {% endfor %}
            </section>
        {% endif %}

    </main>
</div>

<script>
  window.addEventListener('scroll', () => {
    document.querySelector('.topbar')
      ?.classList.toggle('is-scrolled', window.scrollY > 10);
  });
</script>
{% endblock %}
