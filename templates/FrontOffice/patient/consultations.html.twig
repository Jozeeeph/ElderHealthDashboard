<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8">
		<title>Forum communautaire</title>
		<meta
		name="viewport" content="width=device-width, initial-scale=1">

		{# Bootstrap CSS #}
		<link
		href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

		{# Bootstrap Icons #}
		<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

		<link rel="stylesheet" href="{{ asset('css/patient.css') }}?v=20260214-notif1">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
	</head>

	{% block public_nav %}{% endblock %}

	{% block body %}
		<div class="patient-app">
			<style>
				.patient-main {
					background: radial-gradient(circle at 12% 10%, rgba(56, 189, 248, 0.16), transparent 40%), radial-gradient(circle at 88% 18%, rgba(16, 185, 129, 0.14), transparent 42%), linear-gradient(180deg, #f7fbff 0%, #f2fbf7 55%, #ffffff 100%);
					border-radius: 20px;
					padding: 18px;
				}

				.welcome-card {
					background: #ffffff;
					border: 1px solid #e6edf2;
					border-radius: 16px;
					box-shadow: 0 10px 22px rgba(16, 24, 40, 0.06);
				}

				.consult-card {
					display: grid;
					grid-template-columns: 1.2fr 1fr;
					gap: 16px;
					align-items: start;
					background: #ffffff;
					border: 1px solid #e6edf2;
					border-radius: 18px;
					box-shadow: 0 14px 28px rgba(16, 24, 40, 0.08);
					overflow: hidden;
					position: relative;
					padding: 18px;
				}

				.consult-meta,
				.consult-docs {
					display: grid;
					gap: 10px;
				}

				.consult-docs {
					border-left: 1px dashed #e2e8f0;
					padding-left: 16px;
				}

				.consult-row {
					display: grid;
					grid-template-columns: 140px 1fr;
					gap: 10px;
					align-items: center;
				}

				.consult-label {
					color: var(--muted);
					font-size: 0.78rem;
					text-transform: uppercase;
					letter-spacing: 0.04em;
					font-weight: 700;
				}

				.consult-value {
					font-weight: 700;
					color: var(--text);
				}

				.consult-docs .item {
					background: #f8fafc;
					border: 1px solid #e2e8f0;
					border-radius: 12px;
					padding: 12px;
				}

				.consult-docs .item strong {
					display: block;
					margin-bottom: 6px;
					color: #0f172a;
				}

				.consult-card h2 {
					font-size: 1.05rem;
					font-weight: 800;
					color: #0f172a;
				}

				.consult-card::after {
					content: "";
					position: absolute;
					top: 0;
					left: 0;
					width: 100%;
					height: 5px;
					background: linear-gradient(90deg, #38bdf8, #60a5fa, #10b981);
				}

				@media(max-width: 900px) {
					.consult-card {
						grid-template-columns: 1fr;
					}
					.consult-docs {
						border-left: none;
						padding-left: 0;
						border-top: 1px dashed #e2e8f0;
						padding-top: 12px;
					}
				}
			</style>
			{% include 'FrontOffice/patient/_header.html.twig' %}

			<main class="patient-main">
				<section class="welcome-card">
					<h1>Mes consultations</h1>
					<p>Voici la liste de vos consultations.</p>
				</section>

				<section class="content-grid" style="grid-template-columns: 1fr;">
					{% for consultation in consultations %}
						<div class="card consult-card">
							<div>
								<h2>ü©∫ Consultation #{{ consultation.id }}</h2>
								<div class="consult-meta">
									<div class="consult-row">
										<div class="consult-label">üìÖ Date</div>
										<div class="consult-value">{{ consultation.dateConsultation ? consultation.dateConsultation|date('d/m/Y') : '-' }}</div>
									</div>
									<div class="consult-row">
										<div class="consult-label">‚è∞ Heure</div>
										<div class="consult-value">{{ consultation.heureConsultation ? consultation.heureConsultation|date('H:i') : '-' }}</div>
									</div>
									<div class="consult-row">
										<div class="consult-label">üßæ Type</div>
										<div class="consult-value">{{ consultation.typeConsultation }}</div>
									</div>
									<div class="consult-row">
										<div class="consult-label">üìç Lieu</div>
										<div class="consult-value">{{ consultation.lieu }}</div>
									</div>
									<div class="consult-row">
										<div class="consult-label">üë®‚Äç‚öïÔ∏è Personnel</div>
										<div class="consult-value">{{ consultation.personnelMedical.prenom }}
											{{ consultation.personnelMedical.nom }}</div>
									</div>
								</div>
							</div>
							<div class="consult-docs">
								<div class="item">
									<strong>üßæ Rapport m√©dical</strong>
									{% if consultation.rapportMedical %}
										<p>
											<a class="btn ghost" href="{{ path('patient_rapport_show', {'id': consultation.rapportMedical.idRapport}) }}">Voir rapport</a>
											<a class="btn ghost" href="{{ path('rapport_medical_pdf', {'id': consultation.rapportMedical.idRapport}) }}">T√©l√©charger PDF</a>
										</p>
									{% else %}
										<p>Aucun rapport disponible.</p>
									{% endif %}
								</div>
								<div class="item">
									<strong>üíä Prescription</strong>
									{% if consultation.prescription %}
										<p>
											<a class="btn primary" href="{{ path('patient_prescription_show', {'id': consultation.prescription.idPrescription}) }}">Voir prescription</a>
											<a class="btn ghost" href="{{ path('prescription_pdf', {'id': consultation.prescription.idPrescription}) }}">T√©l√©charger PDF</a>
										</p>
									{% else %}
										<p>Aucune prescription disponible.</p>
									{% endif %}
								</div>
							</div>
						</div>
					{% else %}
						<div class="card">
							<h2>Aucune consultation</h2>
							<p>Vous n'avez pas encore de consultation enregistr√©e.</p>
						</div>
					{% endfor %}
				</section>
			</main>
		</div>
	{% endblock %}
</html>
