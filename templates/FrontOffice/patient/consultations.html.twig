{% block stylesheets %}
	<link rel="stylesheet" href="{{ asset('css/patient.css') }}?v=2">
{% endblock %}

{% block body %}
	<div class="patient-app">
		<style>
			.consult-card {
				display: grid;
				grid-template-columns: 1.2fr 1fr;
				gap: 16px;
				align-items: start;
			}

			.consult-meta, .consult-docs {
				display: grid;
				gap: 10px;
			}

			.consult-row {
				display: grid;
				grid-template-columns: 140px 1fr;
				gap: 10px;
				align-items: center;
			}

			.consult-label {
				color: var(--muted);
				font-size: 0.78rem;
				text-transform: uppercase;
				letter-spacing: 0.04em;
				font-weight: 700;
			}

			.consult-value {
				font-weight: 700;
				color: var(--text);
			}

			@media (max-width: 900px) {
				.consult-card {
					grid-template-columns: 1fr;
				}
			}
		</style>
		<header class="topbar">
			<div class="topbar-inner">
				<a href="{{ path('app_public_site') }}" class="brand">
					<img src="{{ asset('img/logo.png') }}" alt="Elder HealthCare">
					<span class="brand-text">
						<span class="fw-bold text-primary">Elder</span>
						<span class="fw-bold text-warning ms-1">HealthCare</span>
					</span>
				</a>

				<nav class="top-nav">
					<a href="{{ path('app_patient_interfce') }}">Accueil</a>
					<a href="{{ path('app_patient_interfce') }}#rendezvous">Rendez-vous</a>
					<a class="active">Consultation</a>
					<a href="{{ path('equipment_list_index') }}">Equipement</a>
					<a href="{{ path('forum_post_forum_index') }}">Forum</a>
					<a href="{{ path('front_events_index') }}">√âv√©nements</a>
				</nav>

				<div class="profile">
					<img src="{{ asset('img/home.jpg') }}" alt="Profil">
					<strong>{{ patient.prenom ?? 'Patient' }}</strong>
				</div>
			</div>
		</header>

		<main class="patient-main">
			<section class="welcome-card">
				<h1>Mes consultations</h1>
				<p>Voici la liste de vos consultations.</p>
			</section>

				<section class="content-grid" style="grid-template-columns: 1fr;">
				{% for consultation in consultations %}
					<div class="card consult-card">
						<div>
							<h2>ü©∫ Consultation #{{ consultation.id }}</h2>
							<div class="consult-meta">
								<div class="consult-row">
									<div class="consult-label">üìÖ Date</div>
									<div class="consult-value">{{ consultation.dateConsultation ? consultation.dateConsultation|date('d/m/Y') : '-' }}</div>
								</div>
								<div class="consult-row">
									<div class="consult-label">‚è∞ Heure</div>
									<div class="consult-value">{{ consultation.heureConsultation ? consultation.heureConsultation|date('H:i') : '-' }}</div>
								</div>
								<div class="consult-row">
									<div class="consult-label">üßæ Type</div>
									<div class="consult-value">{{ consultation.typeConsultation }}</div>
								</div>
								<div class="consult-row">
									<div class="consult-label">üìç Lieu</div>
									<div class="consult-value">{{ consultation.lieu }}</div>
								</div>
								<div class="consult-row">
									<div class="consult-label">üë®‚Äç‚öïÔ∏è Personnel</div>
									<div class="consult-value">{{ consultation.personnelMedical.prenom }} {{ consultation.personnelMedical.nom }}</div>
								</div>
							</div>
						</div>
						<div class="consult-docs">
							<div class="item">
								<strong>üßæ Rapport m√©dical</strong>
								{% if consultation.rapportMedical %}
									<p>
									<a class="btn ghost" href="{{ path('patient_rapport_show', {'id': consultation.rapportMedical.idRapport}) }}">Voir rapport</a>
										<a class="btn ghost" href="{{ path('rapport_medical_pdf', {'id': consultation.rapportMedical.idRapport}) }}">T√©l√©charger PDF</a>
									</p>
								{% else %}
									<p>Aucun rapport disponible.</p>
								{% endif %}
							</div>
							<div class="item">
								<strong>üíä Prescription</strong>
								{% if consultation.prescription %}
									<p>
									<a class="btn primary" href="{{ path('patient_prescription_show', {'id': consultation.prescription.idPrescription}) }}">Voir prescription</a>
										<a class="btn ghost" href="{{ path('prescription_pdf', {'id': consultation.prescription.idPrescription}) }}">T√©l√©charger PDF</a>
									</p>
								{% else %}
									<p>Aucune prescription disponible.</p>
								{% endif %}
							</div>
						</div>
					</div>
				{% else %}
					<div class="card">
						<h2>Aucune consultation</h2>
						<p>Vous n'avez pas encore de consultation enregistr√©e.</p>
					</div>
				{% endfor %}
			</section>
		</main>
	</div>
{% endblock %}
