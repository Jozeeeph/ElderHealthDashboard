<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>
			{% block title %}Site public
			{% endblock %}
		</title>

		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

		<link rel="stylesheet" href="{{ asset('css/style.css') }}">
		<link rel="stylesheet" href="{{ asset('css/footer.css') }}"> {% block stylesheets %}{% endblock %}
		</head>

		<body
			class="{% block body_class %}{% endblock %}">

			{# ===== NAVBAR PUBLIQUE (UNE SEULE FOIS) ===== #}
			{% block public_nav %}
				<nav id="publicNavbar" class="navbar navbar-expand-lg navbar-light navbar-yoopies">
					<div class="container">

						<a class="navbar-brand d-flex align-items-center gap-2" href="{{ path('app_public_site') }}">
							<img src="{{ asset('img/logo.png') }}" alt="Elder HealthCare" class="navbar-logo">
							<span class="brand-text">
								<span class="fw-bold text-primary">Elder</span>
								<span class="fw-bold text-warning ms-1">HealthCare</span>
							</span>
						</a>

						<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#publicNavbarContent">
							<span class="navbar-toggler-icon"></span>
						</button>

						<div class="collapse navbar-collapse" id="publicNavbarContent">

							<ul class="navbar-nav ms-auto align-items-lg-center gap-lg-3">

								<li class="nav-item dropdown">
									{% if not is_granted('ROLE_PROPRIETAIRE_MEDICAUX') %}
										<a class="nav-link dropdown-toggle fw-semibold" href="#" role="button" data-bs-toggle="dropdown">
											Services
										</a>
									{% endif %}


									<ul class="dropdown-menu dropdown-menu-end services-dropdown">
										<li>
											<a class="dropdown-item services-item" href="{{ path('front_events_index') }}">
												<i class="bi bi-calendar-event services-icon"></i>
												<span>Événements</span>
											</a>
										</li>
										<li>
											<a class="dropdown-item services-item" href="#">
												<i class="bi bi-clock services-icon"></i>
												<span>Rendez-vous</span>
											</a>
										</li>
										<li>
											<a class="dropdown-item services-item" href="#">
												<i class="bi bi-heart-pulse services-icon"></i>
												<span>Consultations</span>
											</a>
										</li>
										<li>
											<a class="dropdown-item services-item" href="{{ path('forum_post_forum_index') }}">
												<i class="bi bi-chat-dots services-icon"></i>
												<span>Forum</span>
											</a>
										</li>
									</ul>
								</li>

								{# <li class="nav-item">
																<a class="nav-link fw-semibold" href="#">
																	<i class="bi bi-heart-pulse me-1"></i>
																	Besoin d’aide ?
																</a>
															</li> #}
							</ul>

							{# Right side auth actions #}
							<div class="ms-lg-3 d-flex gap-2 mt-3 mt-lg-0">

								{% if app.user %}

									<a class="btn btn-outline-primary btn-sm" href="{{ path('app_home') }}">
										Accueil app
									</a>

									{% if is_granted('ROLE_ADMIN') %}
										<a class="btn btn-primary btn-sm" href="{{ path('admin_users_index') }}">
											Dashboard Admin
										</a>
									{% endif %}

									<a class="btn btn-outline-danger btn-sm" href="{{ path('app_logout') }}">
										<i class="bi bi-box-arrow-right"></i>
										Logout
									</a>

								{% else %}

									<a class="btn btn-outline-primary btn-sm" href="{{ path('app_login') }}">
										<i class="bi bi-person"></i>
										Login
									</a>

									<a class="btn btn-primary btn-sm" href="{{ path('app_register') }}">
										<i class="bi bi-person-plus"></i>
										Register
									</a>

								{% endif %}
							</div>

						</div>
					</div>
				</nav>

				{# Flash success #}
				{% for message in app.flashes('success') %}
					<div class="container mt-3">
						<div class="alert alert-success alert-dismissible fade show" role="alert">
							{{ message }}
							<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
						</div>
					</div>
				{% endfor %}
			{% endblock %}

			{# Page content #}
			{% block body %}{% endblock %}

			<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

			{% block javascripts %}
				<script>
					const nav = document.getElementById('publicNavbar');

function onScroll() {
if (! nav) 
return;

if (window.scrollY > 10) 
nav.classList.add('is-scrolled');
 else 
nav.classList.remove('is-scrolled');

}

onScroll();
window.addEventListener('scroll', onScroll, {passive: true});
				</script>
			{% endblock %}

			{% include 'partials/_footer.html.twig' %}
		</body>
	</html>
