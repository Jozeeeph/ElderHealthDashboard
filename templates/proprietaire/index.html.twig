{% extends 'base.html.twig' %}

{% block title %}Gestion - Mat√©riaux{% endblock %}

{% block stylesheets %}
  {{ parent() }}
  <link rel="stylesheet" href="{{ asset('css/materiaux.css') }}?v=1">
{% endblock %}

{% block body %}
<div class="mat-app">

  <!-- TOPBAR -->
  <header class="mat-topbar">
    <div class="mat-topbar-inner">

      <a href="{{ path('app_public_site') }}" class="mat-brand">
        <img src="{{ asset('img/logo.png') }}" alt="Elder HealthCare">
        <span>Admin <span>Mat√©riaux</span></span>
      </a>

      <nav class="mat-nav">
        <a class="active" href="#">Mat√©riaux</a>
        <a href="#">Cat√©gories</a>
        <a href="#">Stock</a>
        <a href="#">Fournisseurs</a>
      </nav>

      <div class="mat-profile">
        <img src="{{ asset('img/home.jpg') }}" alt="Profil">
        <strong>Admin</strong>
      </div>

    </div>
  </header>

  <main class="mat-main">

    <!-- HEADER / ACTIONS -->
    <section class="mat-head">
      <div>
        <h1>Propri√©t√© Mat√©riaux</h1>
        <p>G√©rez les mat√©riaux : ajout, modification, suppression, disponibilit√©, stock et seuil.</p>
      </div>

      <div class="mat-head-actions">
        <button class="btn primary" type="button" onclick="openMatModal('create')">
          + Ajouter mat√©riau
        </button>
      </div>
    </section>

    <!-- FILTER BAR -->
    <section class="mat-filters">
      <div class="search">
        <span class="icon">üîé</span>
        <input type="text" placeholder="Rechercher par nom, r√©f√©rence, cat√©gorie..." />
      </div>

      <select>
        <option>Toutes les cat√©gories</option>
        <option>√âquipement m√©dical</option>
        <option>Consommable</option>
        <option>Hygi√®ne</option>
      </select>

      <select>
        <option>Disponibilit√© : Toutes</option>
        <option>Disponible</option>
        <option>Indisponible</option>
      </select>

      <button class="btn ghost" type="button">Filtrer</button>
      <button class="btn ghost" type="button">R√©initialiser</button>
    </section>

    <!-- TABLE -->
    <section class="mat-card">
      <div class="mat-card-head">
        <h2>Liste des mat√©riaux</h2>
        <div class="mat-meta">Total : <strong>6</strong></div>
      </div>

      <div class="table-wrap">
        <table class="mat-table">
          <thead>
            <tr>
              <th>R√©f</th>
              <th>Nom</th>
              <th>Cat√©gorie</th>
              <th>Stock</th>
              <th>Seuil</th>
              <th>Prix</th>
              <th>√âtat</th>
              <th class="right">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="mono">MAT-001</td>
              <td><strong>Gants m√©dicaux</strong><div class="sub">Bo√Æte 100</div></td>
              <td>Consommable</td>
              <td><span class="chip ok">120</span></td>
              <td><span class="chip">30</span></td>
              <td class="mono">12.00</td>
              <td><span class="pill ok">Disponible</span></td>
              <td class="right">
                <button class="btn-sm" onclick="openMatModal('edit')">Modifier</button>
                <button class="btn-sm danger">Supprimer</button>
              </td>
            </tr>

            <tr>
              <td class="mono">MAT-002</td>
              <td><strong>Masque chirurgical</strong><div class="sub">Pack 50</div></td>
              <td>Hygi√®ne</td>
              <td><span class="chip warn">25</span></td>
              <td><span class="chip">40</span></td>
              <td class="mono">8.50</td>
              <td><span class="pill warn">Stock bas</span></td>
              <td class="right">
                <button class="btn-sm" onclick="openMatModal('edit')">Modifier</button>
                <button class="btn-sm danger">Supprimer</button>
              </td>
            </tr>

            <tr>
              <td class="mono">MAT-003</td>
              <td><strong>Thermom√®tre</strong><div class="sub">Digital</div></td>
              <td>√âquipement m√©dical</td>
              <td><span class="chip">10</span></td>
              <td><span class="chip">5</span></td>
              <td class="mono">35.00</td>
              <td><span class="pill ok">Disponible</span></td>
              <td class="right">
                <button class="btn-sm" onclick="openMatModal('edit')">Modifier</button>
                <button class="btn-sm danger">Supprimer</button>
              </td>
            </tr>

            <tr>
              <td class="mono">MAT-004</td>
              <td><strong>Seringues</strong><div class="sub">Pack 20</div></td>
              <td>Consommable</td>
              <td><span class="chip danger">0</span></td>
              <td><span class="chip">20</span></td>
              <td class="mono">6.00</td>
              <td><span class="pill danger">Indisponible</span></td>
              <td class="right">
                <button class="btn-sm" onclick="openMatModal('edit')">Modifier</button>
                <button class="btn-sm danger">Supprimer</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- PAGINATION (static) -->
      <div class="mat-pagination">
        <span class="muted">Page 1 sur 2</span>
        <div class="pager">
          <button class="btn-sm" disabled>‚Üê</button>
          <button class="btn-sm active">1</button>
          <button class="btn-sm">2</button>
          <button class="btn-sm">‚Üí</button>
        </div>
      </div>
    </section>

  </main>

  <!-- MODAL (Add/Edit) -->
  <div class="mat-modal" id="matModal" aria-hidden="true">
    <div class="mat-modal-backdrop" onclick="closeMatModal()"></div>

    <div class="mat-modal-card" role="dialog" aria-modal="true">
      <div class="mat-modal-head">
        <h3 id="matModalTitle">Ajouter un mat√©riau</h3>
        <button class="x" onclick="closeMatModal()" aria-label="Fermer">‚úï</button>
      </div>

      <form class="mat-form" onsubmit="event.preventDefault(); closeMatModal();">
        <div class="grid">
          <div class="field">
            <label>R√©f√©rence</label>
            <input type="text" placeholder="MAT-005" required>
          </div>

          <div class="field">
            <label>Nom</label>
            <input type="text" placeholder="Ex: Compresses st√©riles" required>
          </div>

          <div class="field">
            <label>Cat√©gorie</label>
            <select required>
              <option value="">Choisir...</option>
              <option>√âquipement m√©dical</option>
              <option>Consommable</option>
              <option>Hygi√®ne</option>
            </select>
          </div>

          <div class="field">
            <label>Prix</label>
            <input type="number" step="0.01" placeholder="0.00" required>
          </div>

          <div class="field">
            <label>Stock</label>
            <input type="number" placeholder="0" required>
          </div>

          <div class="field">
            <label>Seuil</label>
            <input type="number" placeholder="0" required>
          </div>

          <div class="field span-2">
            <label>Description</label>
            <textarea placeholder="D√©tails du mat√©riau..."></textarea>
          </div>

          <div class="field">
            <label>Disponibilit√©</label>
            <select>
              <option>Disponible</option>
              <option>Indisponible</option>
            </select>
          </div>
        </div>

        <div class="mat-form-actions">
          <button type="button" class="btn ghost" onclick="closeMatModal()">Annuler</button>
          <button type="submit" class="btn primary">Enregistrer</button>
        </div>
      </form>
    </div>
  </div>

</div>

<script>
  function openMatModal(mode){
    const modal = document.getElementById('matModal');
    const title = document.getElementById('matModalTitle');
    title.textContent = mode === 'edit' ? 'Modifier le mat√©riau' : 'Ajouter un mat√©riau';
    modal.classList.add('open');
    modal.setAttribute('aria-hidden', 'false');
  }
  function closeMatModal(){
    const modal = document.getElementById('matModal');
    modal.classList.remove('open');
    modal.setAttribute('aria-hidden', 'true');
  }
</script>
{% endblock %}
