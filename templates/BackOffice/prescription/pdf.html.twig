<!doctype html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <title>Prescription</title>
    <style>
        @page { margin: 16mm 14mm; }
        body { font-family: DejaVu Sans, Arial, sans-serif; color: #1f2a32; font-size: 12px; }
        .sheet { border: 1px solid #dde6ec; border-radius: 12px; padding: 12px 14px; }
        .header { border-bottom: 1px solid #e6edf0; padding-bottom: 10px; }
        .header-table { width: 100%; border-spacing: 0; }
        .logo-cell { width: 90px; vertical-align: top; }
        .logo { width: 70px; height: auto; }
        .title { font-size: 21px; font-weight: 800; letter-spacing: 0.3px; }
        .sub { color: #5b6b73; font-size: 11px; margin-top: 2px; }
        .tagline { color: #2f5b68; font-size: 11px; margin-top: 5px; }
        .meta { text-align: right; color: #5b6b73; font-size: 10px; }
        .grid { margin-top: 10px; }
        .label { color: #5b6b73; font-size: 9.5px; text-transform: uppercase; letter-spacing: 0.08em; }
        .value { font-weight: 600; margin-top: 3px; }
        .box { border: 1px solid #e0e6ea; border-radius: 10px; padding: 10px 12px; background: #ffffff; }
        .row { width: 100%; border-spacing: 10px; }
        .cell { width: 50%; vertical-align: top; }
        .pill { display: inline-block; padding: 3px 10px; border-radius: 999px; border: 1px solid #d6e7ec; background: #eef6f8; color: #1a5b6b; font-weight: 700; }
        .divider { height: 1px; background: #e6edf0; margin: 10px 0; }
        .footer { margin-top: 12px; color: #6b7a80; font-size: 9.5px; text-align: right; }
        .accent { height: 4px; border-radius: 999px; background: #0e8aa7; margin-top: 8px; }
        .subtle { color: #7a8a93; font-size: 10px; }
    </style>
</head>
<body>
    <div class="sheet">
        <div class="header">
            <table class="header-table">
                <tr>
                    <td class="logo-cell">
                        {% if logo_data_uri %}
                            <img class="logo" src="{{ logo_data_uri }}" alt="Elder Healthcare">
                        {% else %}
                            <div class="value" style="font-size: 14px; font-weight: 800;">Elder</div>
                            <div class="label" style="font-size: 10px;">Healthcare</div>
                        {% endif %}
                    </td>
                    <td>
                        <div class="title">Prescription médicale</div>
                        <div class="sub">
                            Consultation #{{ prescription.consultation.id }} •
                            {{ prescription.consultation.patient.prenom }} {{ prescription.consultation.patient.nom }}
                        </div>
                        <div class="tagline">
                            Elder Healthcare – Votre partenaire de confiance pour des soins seniors sûrs, attentionnés et personnalisés.
                        </div>
                    </td>
                    <td class="meta">
                        Réf: PR-{{ prescription.idPrescription }}<br>
                        {{ "now"|date("d/m/Y") }}
                    </td>
                </tr>
            </table>
            <div class="accent"></div>
        </div>

        <div class="grid">
            <table class="row">
                <tr>
                    <td class="cell">
                        <div class="box">
                            <div class="label">Médicaments</div>
                            <div class="value">{{ prescription.medicaments }}</div>
                            <div class="divider"></div>
                            <div class="label">Consignes</div>
                            <div class="value">{{ prescription.consignes ?: '-' }}</div>
                            <div class="divider"></div>
                            <div class="subtle">Respectez strictement les indications du professionnel de santé.</div>
                        </div>
                    </td>
                    <td class="cell">
                        <div class="box">
                            <div class="label">Fréquence</div>
                            <div class="value"><span class="pill">{{ prescription.frequence }}</span></div>
                            <div class="divider"></div>
                            <div class="label">Dosage</div>
                            <div class="value"><span class="pill">{{ prescription.dosage }}</span></div>
                            <div class="divider"></div>
                            <div class="label">Durée du traitement</div>
                            <div class="value">{{ prescription.dureeTraitement }}</div>
                            <div class="divider"></div>
                            <div class="label">Période</div>
                            <div class="value">
                                {{ prescription.dateDebut ? prescription.dateDebut|date('d/m/Y') : '-' }}
                                -
                                {{ prescription.dateFin ? prescription.dateFin|date('d/m/Y') : '-' }}
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </div>

        <div class="footer">
            Document généré le {{ "now"|date("d/m/Y H:i") }}
        </div>
    </div>
</body>
</html>
