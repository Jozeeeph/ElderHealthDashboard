{% extends 'base.html.twig' %}
{% block title %}Types d’événements{% endblock %}

{% block stylesheets %}
  {{ parent() }}
  <link rel="stylesheet" href="{{ asset('css/sb-admin-2.min.css') }}">
  <link rel="stylesheet" href="{{ asset('css/forum.css') }}">
{% endblock %}

{% block body %}
<div class="forum-wrap">
  <div class="container">

    <div class="forum-header">
      <div>
        <h2 class="forum-title">Types d’événements</h2>
        <div class="text-muted">Gestion</div>
      </div>

      <div class="d-flex gap-2">
        {# ✅ Retour vers Events admin #}
        <a class="btn btn-outline-secondary" href="{{ path('admin_event_index') }}">
          <i class="bi bi-arrow-left"></i> Événements
        </a>

        {# ✅ Nouveau type admin #}
        <a class="btn btn-brand" href="{{ path('admin_typeevent_new') }}">
          <i class="bi bi-plus-circle"></i> Nouveau type
        </a>
      </div>
    </div>

    {% for label, messages in app.flashes %}
      {% for msg in messages %}
        <div class="alert alert-{{ label }} mb-3">{{ msg }}</div>
      {% endfor %}
    {% endfor %}

    {% for t in types %}
      <div class="post-card">
        <div class="post-card__top">
          <div class="post-meta">
            <h5 class="mb-1">{{ t.libelle }}</h5>
            <div class="small text-muted">{{ t.description|default('') }}</div>
          </div>

          <span class="badge-soft {{ t.isActive ? 'badge-active' : 'badge-inactive' }}">
            {{ t.isActive ? 'Actif' : 'Inactif' }}
          </span>
        </div>

        <div class="actions">
          {# ✅ edit admin #}
          <a class="icon-btn" title="Modifier" href="{{ path('admin_typeevent_edit', {id: t.id}) }}">
            <i class="bi bi-pencil-square"></i>
          </a>

          {# ✅ delete admin #}
          <form method="post"
                action="{{ path('admin_typeevent_delete', {id: t.id}) }}"
                onsubmit="return confirm('Supprimer ce type ?');"
                class="d-inline">
            <input type="hidden" name="_token" value="{{ csrf_token('delete_type_' ~ t.id) }}">
            <button class="icon-btn danger" title="Supprimer" type="submit">
              <i class="bi bi-trash"></i>
            </button>
          </form>
        </div>
      </div>
    {% else %}
      <div class="empty">Aucun type pour le moment.</div>
    {% endfor %}

  </div>
</div>
{% endblock %}
